{"author":{"id":"c8b5e6f4594a39a69d740ff06f6530160b48ff53db7027c22c4091f811b01812"},"ops":[{"type":1,"timestamp":1723544608,"nonce":"rrZmc5XUCjZ5wzB//tRtqDhIuGE=","metadata":{"github-id":"I_kwDOEt7lWM6Sziff","github-url":"https://github.com/buzden/deptycheck/issues/179","origin":"github"},"title":"Bad file position in an error message when something wrong with an argument of a function type with a named argument","message":"Derived generators currently cannot have unnamed explicit arguments, e.g. this is wrong and should fail:\n\n```idris\ngen : Fuel -\u003e ((a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\ngen = deriveGen\n```\n\nAlso, there cannot be any unused explicit arguments, e.g. this is wrong and should fail:\n\n```idris\ngen' : Fuel -\u003e (d : (a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\ngen' = deriveGen\n```\n\nAnd both these derivation indeed fail, as should. But their error messages are a bit misleading:\n\n```\nError: While processing right hand side of gen. Error during reflection:\nExplicit argument must be named and must not shadow any other name\n\n\u003cfilename\u003e:12:17--12:18\n 11 |\n 12 | gen : Fuel -\u003e ((a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                      ^\n```\n\n```\nError: While processing right hand side of gen'. Error during reflection:\nGiven parameter is not used in the target type\n\n\u003cfilename\u003e:15:22--15:23\n 14 |\n 15 | gen' : Fuel -\u003e (d : (a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                           ^\n```\n\nThey should highlight the whole type, or at least argument's name (if present) instead, something like this:\n\n```\nError: While processing right hand side of gen. Error during reflection:\nExplicit argument must be named and must not shadow any other name\n\n\u003cfilename\u003e:12:17--12:18\n 11 |\n 12 | gen : Fuel -\u003e ((a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                     ^^^^^^^^^^^^^^^^\n```\n\nand one of these:\n\n```\nError: While processing right hand side of gen'. Error during reflection:\nGiven parameter is not used in the target type\n\n\u003cfilename\u003e:15:22--15:23\n 14 |\n 15 | gen' : Fuel -\u003e (d : (a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                      ^\n```\nor\n```\nError: While processing right hand side of gen'. Error during reflection:\nGiven parameter is not used in the target type\n\n\u003cfilename\u003e:15:22--15:23\n 14 |\n 15 | gen' : Fuel -\u003e (d : (a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                          ^^^^^^^^^^^^^^^^\n```\nor\n```\nError: While processing right hand side of gen'. Error during reflection:\nGiven parameter is not used in the target type\n\n\u003cfilename\u003e:15:22--15:23\n 14 |\n 15 | gen' : Fuel -\u003e (d : (a : Nat) -\u003e Nat) -\u003e Gen MaybeEmpty Nat\n                      ^^^^^^^^^^^^^^^^^^^^\n```","files":null}]}