{"author":{"id":"3af9e2655ad9f293988512be60886dcee65d101213a8f77d6e1aec75c05cdd9f"},"ops":[{"type":1,"timestamp":1660315271,"nonce":"UydjIuW0Zlz0NbEZKBAv4N2uhXg=","metadata":{"github-id":"I_kwDOEt7lWM5PtYep","github-url":"https://github.com/buzden/deptycheck/issues/14","origin":"github"},"title":"Derivation fails when constructor in dependent type index has an unnamed auto implicit argument","message":"# Steps to reproduce\n\nConsider the following module which asks for derivation of a generator:\n\n```idris\nimport Test.DepTyCheck.Gen\nimport Test.DepTyCheck.Gen.Auto\n\n%default total\n\n%language ElabReflection\n\n%hint\nUsedConstructorDerivator : ConstructorDerivator\nUsedConstructorDerivator = LeastEffort\n\nmutual\n  data X : Type where\n    Nil : X\n    (::) : (x : Unit) -\u003e\n           (xs : X) -\u003e\n           Y x xs =\u003e\n           X\n\n  data Y: Unit -\u003e X -\u003e Type where\n    A : Y n []\n    B : Y n xs -\u003e\n        Y x xs =\u003e\n        Y n (x::xs)\n\n\nfaultyGen : Fuel -\u003e Gen X \nfaultyGen = deriveGen\n```\n\n# Expected behaviour\n\nAll derives and typechecks OR a comprehensible error message giving a hint on what is wrong.\n\n# Observed behaviour\n\n```\nError: While processing right hand side of faultyGen. Error during reflection: Unsupported name `{conArg:933}` of a parameter used in the constructor\n\nFaultyGen:31:9--31:20\n 27 |   data Y: Unit -\u003e X -\u003e Type where\n 28 |     A : Y n []\n 29 |     B : Y n xs -\u003e\n 30 |         Y x xs =\u003e\n 31 |         Y n (x::xs)\n              ^^^^^^^^^^^\n```","files":null}]}