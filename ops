{"author":{"id":"b22b22cff7e1632a29cea99f31c0362d591fa721518f26c84cc60341fef126c0"},"ops":[{"type":1,"timestamp":1739358422,"nonce":"FVYnNj+1/fu1bY5D+/Adf+5pBys=","metadata":{"github-id":"I_kwDOEt7lWM6pv6VR","github-url":"https://github.com/buzden/deptycheck/issues/231","origin":"github"},"title":"Implicit parameter is not resolved during derivation","message":"Consider the following code:\n```idris\ndata X : Bool -\u003e Type where\n  MkX : (b : Bool) -\u003e X b\n\ndata Y : Bool -\u003e Type where\n  MkY : X b -\u003e X b -\u003e Y b\n\ndata Z : Y b -\u003e Type where\n  MkZ0 : Z y\n  MkZ1 : Z (MkY x x1) -\u003e Z (MkY x x2)  -- the fact that x is in both types means the value of b is the same\n\ngenZ : Fuel -\u003e (b : Bool) -\u003e (y : Y b) -\u003e Gen MaybeEmpty $ Z y\ngenZ = deriveGen\n```\n**Expected behaviour:** `genZ` can be successfully derived\n**Actual behaviour:** derivation ends up with the error\n```\n[ build ] 1/1: Building Test (src/Test.idr)\n[ build ] LOG deptycheck.derive.namesInfo:5: ____ start ____\n[ build ] LOG deptycheck.derive.namesInfo:5: ^^^^  end  ^^^^\n[ build ] LOG deptycheck.derive.type:5: Test.Z[0, 1] ___ start ___\n[ build ] LOG deptycheck.derive.consBody:5: Test.Z[0, 1] MkZ0 __ start __\n[ build ] LOG deptycheck.derive.consBody:5: Test.Z[0, 1] MkZ0 ^^  end  ^^\n[ build ] LOG deptycheck.derive.consBody:5: Test.Z[0, 1] MkZ1 __ start __\n[ build ] LOG deptycheck.derive.consBody:5: Test.Z[0, 1] MkZ1 ^^  end  ^^\n[ build ] LOG deptycheck.derive.consRec:5: Test.Z[0, 1] ___ start ___\n[ build ] LOG deptycheck.derive.consRec:5: Test.Z[0, 1] ^^^  end  ^^^\n[ build ] LOG deptycheck.derive.type:5: Test.Z[0, 1] ^^^  end  ^^^\n[ build ] LOG deptycheck.derive.type:5: Test.X[0] ___ start ___\n[ build ] LOG deptycheck.derive.consBody:5: Test.X[0] MkX __ start __\n[ build ] LOG deptycheck.derive.consBody:5: Test.X[0] MkX ^^  end  ^^\n[ build ] LOG deptycheck.derive.consRec:5: Test.X[0] ___ start ___\n[ build ] LOG deptycheck.derive.consRec:5: Test.X[0] ^^^  end  ^^^\n[ build ] LOG deptycheck.derive.type:5: Test.X[0] ^^^  end  ^^^\n[ build ] Error: While processing right hand side of genZ. Error during reflection: While processing right hand side of $resolved14629,\u003cTest.Z\u003e[0, 1]. While processing right hand side of $resolved14629,\u003cTest.Z\u003e[0, 1],\u003c\u003cTest.MkZ1\u003e\u003e. Can't solve\n[ build ] constraint between: (^bnd^{b:3667}) and b.\n[ build ] \n[ fatal ] Error when executing system command.\n          Command: \"/root/.pack/install/8e420d6b2e29c276f77b562955f01958664ccb58/idris2/bin/idris2\" \"--build\" \"test.ipkg\"\n          Error code: 1\n```","files":null}]}