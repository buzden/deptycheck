{"author":{"id":"3af9e2655ad9f293988512be60886dcee65d101213a8f77d6e1aec75c05cdd9f"},"ops":[{"type":1,"timestamp":1679919550,"nonce":"RmrRxmCuR2mO8crSIvWKa+C/YK8=","metadata":{"github-id":"I_kwDOEt7lWM5h3ypV","github-url":"https://github.com/buzden/deptycheck/issues/61","origin":"github"},"title":"Do not spend fuel when given index is structurally decreasing","message":"Currently whenever derived generator recursively calls itself with a structurally smaller given parameter, the fuel is spent nonetheless. \nConsider the following example:\n\n```idris\ndata NatVect : Nat -\u003e Type where\n  Nil : NatVect 0\n  (::) : Nat -\u003e NatVect n -\u003e NatVect (S n)\n\ngenNatVect : (Fuel -\u003e Gen Nat) =\u003e Fuel -\u003e (n : Nat) -\u003e Gen $  NatVect n\ngenNatVect = deriveGen\n```\n\nIn that case, if desired length is greater than fuel, no output would be produced, because the generator would run out of fuel before producing anything. Decrease of fuel, however, is not required here -- generator calls itself with decreasing given parameter, hence ensuring termination.\n\nPerhaps it would be better to avoid spending fuel in such cases?","files":null}]}