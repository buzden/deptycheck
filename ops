{"author":{"id":"262ecba31362fba25f81987d50e9011266f1a7076102efce621b0a8dd02b64dc"},"ops":[{"type":1,"timestamp":1740558458,"nonce":"7+ZHighmCjL+hvyo1cHJCGmfNh0=","metadata":{"github-id":"I_kwDOEt7lWM6rs9mK","github-url":"https://github.com/buzden/deptycheck/issues/240","origin":"github"},"title":"Reflection: Argument #1 is not supported yet, reason: name `\u003cfunc\u003e` is not a constructor","message":"I encountered an issue in the derivation process. The error message says that a function name is interpreted as a constructor leading to a failure.\n\n## The code:\n```Idris\nimport Data.Fuel\nimport Test.DepTyCheck.Gen\n\n%default total\n\n%logging \"deptycheck\" 7\n\nnamespace A\n\n  public export\n  data FinsList : Nat -\u003e Type where\n    Nil  : FinsList n\n    (::) : Fin n -\u003e FinsList n -\u003e FinsList n\n\n  public export\n  (.length) : FinsList n -\u003e Nat\n  (.length) []      = 0\n  (.length) (x::xs) = S xs.length\n\n  public export\n  fst : (fs : FinsList s) -\u003e Fin fs.length -\u003e Fin s\n  fst (f::_ ) _ = f\n\nnamespace B\n\n  public export\n  data NatsList = Nil | (::) Nat NatsList\n\n  public export\n  (.length) : NatsList -\u003e Nat\n  (.length) []      = Z\n  (.length) (_::ms) = S ms.length\n\npublic export\ndata FindNat : (nats: NatsList) -\u003e Fin (nats.length) -\u003e Type where\n  MHere  : FindNat (p::ps) FZ\n\npublic export\ndata Test : (nats: NatsList) -\u003e FinsList (nats.length) -\u003e Type where\n  MkT  : FindNat nats (fst fins f) -\u003e Test nats fins\n\npublic export\ngenTest : Fuel -\u003e (nats: NatsList) -\u003e (fins: FinsList $ nats.length) -\u003e Gen MaybeEmpty $ Test nats fins\ngenTest = deriveGen\n```\n\n## Expected behavior\nThe generator is derived sucessfully\n\n## Actual behavior\nThe derivation process throws an error\n\n```\nLOG deptycheck.derive.type:2: TestModule.Test[0, 1] ___ start ___\nLOG deptycheck.derive.consBody:2: TestModule.Test[0, 1] MkT __ start __\nLOG deptycheck.derive.least-effort:7: TestModule.Test[0, 1] MkT - used final order: [#2 (f), #3]\nLOG deptycheck.derive.consBody:2: TestModule.Test[0, 1] MkT ^^  end  ^^\nLOG deptycheck.derive.type:2: TestModule.Test[0, 1] ^^^  end  ^^^\nLOG deptycheck.derive.type:2: TestModule.FindNat[0, 1] ___ start ___\nLOG deptycheck.derive.consBody:2: TestModule.FindNat[0, 1] MHere __ start __\nError: While processing right hand side of genTest. Error during\nreflection: Argument #1 is not supported yet, argument expression: Data.Fin.FZ {k = TestModule.B..length ps}, reason: name `TestModule.B..length` is not a constructor\n```\n\n## Environment\nThe problem is reproduced for the `nightly-250208` and `nightly-250224` pack collections","files":null}]}