{"author":{"id":"3af9e2655ad9f293988512be60886dcee65d101213a8f77d6e1aec75c05cdd9f"},"ops":[{"type":1,"timestamp":1660858335,"nonce":"Kixqc4bKBXQiCri1ZTw0YqdT2I0=","metadata":{"github-id":"I_kwDOEt7lWM5QFsYU","github-url":"https://github.com/buzden/deptycheck/issues/20","origin":"github"},"title":"Derived generators have incorrect order of `decEq` applications","message":"# Steps to reproduce\n\nConsider the following module that asks for derivation of a generator:\n\n```idris\nimport Test.DepTyCheck.Gen\nimport Test.DepTyCheck.Gen.Auto\n\n%default total\n\n%language ElabReflection\n\n%hint\nUsedConstructorDerivator : ConstructorDerivator\nUsedConstructorDerivator = LeastEffort\n\ndata X : Type \n\ndata Y : X -\u003e Type where\n  MkY : Y x\n\ndata X : Type where\n  Nil : X\n  Cons : (x : X) -\u003e Y x -\u003e X\n\ndata Z : X -\u003e X -\u003e Type where\n  MkZ : (prf : Y x) -\u003e Z (Cons x prf) (Cons x prf)\n\nfaultyGen : Fuel -\u003e (x : X) -\u003e (x' : X) -\u003e Gen $ Z x x'\nfaultyGen = deriveGen\n```\n\n# Expected behaviour \n\nAll derives and typechecks OR a comprehensible error message giving a hint on what is wrong\n\n# Observed behaviour\n\n```\nError: While processing right hand side of faultyGen. Error during reflection: While processing right hand side\nof $resolved11708,\u003cMain.Z\u003e[0, 1]. While processing right hand side of $resolved11708,\u003cMain.Z\u003e[0, 1],\u003c\u003cMain.MkZ\u003e\u003e. When unifying:\n    Y to_be_deceqed^^x0\nand:\n    Y x\nMismatch between: to_be_deceqed^^x0 and x.\n```","files":null}]}