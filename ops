{"author":{"id":"3af9e2655ad9f293988512be60886dcee65d101213a8f77d6e1aec75c05cdd9f"},"ops":[{"type":3,"timestamp":1709200082,"nonce":"Qs6NBmdbVI8zGE/x/ziS3xaenu8=","metadata":{"github-id":"IC_kwDOEt7lWM51d5lP","github-url":"https://github.com/buzden/deptycheck/issues/55#issuecomment-1970772303"},"message":"A simple example demonstrating the importance of fusion would be the following set of data types:\n\n```idris\ndata X : Nat -\u003e Nat -\u003e Type where\n  MkX : X 42 m\n\ndata Y : Nat -\u003e Nat -\u003e Type where\n  MkY : Y n 1337\n\ndata Z : Type where\n  MkZ : (n : Nat) -\u003e (m : Nat) -\u003e X n m -\u003e Y n m -\u003e Z\n```\n\nCurrently, the derived generator for `Z` would turn out to be grossly inefficient. There are two possible orderings of argument generation for constructor `MkZ`: `X[], Y[0, 1]` and `Y[], X[0, 1]`, and either one is impractical to use. \n\nHowever, this specific case could be solved with even the simplest fusion algorithm that works only on non-recursive data types. It would result in the following type:\n\n```\nXY : Nat -\u003e Nat -\u003e Type where\n  MkXMkY : XY 42 1337\n```\n\nWhich can be efficiently generated.","files":null},{"type":6,"timestamp":1709200093,"nonce":"jrmhUsWT+AYNFg+fFHO9ho3O3Bg=","metadata":{"github-id":"UCE_lALOEt7lWM51d5lPzkEPx3g"},"target":"315f76abde79bdcd5c199427a06b924cc455dc75c8454d1914e072685b85ad89","message":"A simple example demonstrating the importance of fusion would be the following set of data types:\n\n```idris\ndata X : Nat -\u003e Nat -\u003e Type where\n  MkX : X 42 m\n\ndata Y : Nat -\u003e Nat -\u003e Type where\n  MkY : Y n 1337\n\ndata Z : Type where\n  MkZ : (n : Nat) -\u003e (m : Nat) -\u003e X n m -\u003e Y n m -\u003e Z\n```\n\nCurrently, the derived generator for `Z` would turn out to be grossly inefficient. There are two possible orderings of argument generation for constructor `MkZ`: `X[], Y[0, 1]` and `Y[], X[0, 1]`, and either one is impractical to use. \n\nHowever, this specific case could be solved with even the simplest fusion algorithm that works only on non-recursive data types. It would result in the following type:\n\n```idris\nXY : Nat -\u003e Nat -\u003e Type where\n  MkXMkY : XY 42 1337\n```\n\nWhich can be efficiently generated.","files":null}]}