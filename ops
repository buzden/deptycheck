{"author":{"id":"974c2426701ae97ed36f19a3856497e52222c2e370fde7d3f0c33851d3f76984"},"ops":[{"type":1,"timestamp":1742557743,"nonce":"dxMGpJfkwKwnfa0CvLYZD1wHr6k=","metadata":{"github-id":"I_kwDOEt7lWM6vIMwz","github-url":"https://github.com/buzden/deptycheck/issues/254","origin":"github"},"title":"\"Argument is not supported yet, `\u003cfunc\u003e` is not a constructor\" error even when the given argument shouldn't be determining","message":"**Package collection used:** `nightly-250320`\n\nConsider the following generator:\n\n```idris\npublic export\ndata A : Nat -\u003e Type where\n    A1 : (0 a : Nat) -\u003e (0 b : Nat) -\u003e A (a + b)\n    A2 : (0 a : Nat) -\u003e (0 b : Nat) -\u003e A (a + b + 2)\n\npublic export\ndata B : A n -\u003e Type where\n    B1 : B $ A1 a b\n    B2 : B $ A2 a b\n\npublic export\ngenB : Fuel -\u003e (n : Nat) -\u003e (sub : A n) -\u003e Gen MaybeEmpty (B sub)\ngenB = deriveGen\n```\n\nDerivation fails with the following error:\n\n```\n[ info ] Using package collection nightly-250320\n[ build ] 1/1: Building Main (src/Main.idr)\n[ build ] Error: While processing right hand side of genB. Error during reflection: Argument #0 is not supported yet, argument expression: Prelude.Types.plus a b, reason: name `Prelude.Types.plus` is not a constructor\n[ build ] \n[ build ] Main:12:10--12:20\n[ build ]  08 |     A2 : (0 a : Nat) -\u003e (0 b : Nat) -\u003e A (a + b + 2)\n[ build ]  09 | \n[ build ]  10 | public export\n[ build ]  11 | data B : A n -\u003e Type where\n[ build ]  12 |     B1 : B $ A1 a b\n[ build ]                ^^^^^^^^^^\n```\n\nIdeally this shouldn't happen, since argument `#1` (of type `A n`) should already be enough to determine the corresponding constructor of type `A` and its parameters `a` and `b`, so the irreversibility of `(+)` shouldn't affect derivation in this case.","files":null}]}