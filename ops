{"author":{"id":"c8b5e6f4594a39a69d740ff06f6530160b48ff53db7027c22c4091f811b01812"},"ops":[{"type":1,"timestamp":1723543820,"nonce":"0S8Yh/FEG8XvPkR/dU/wwrQoJ/k=","metadata":{"github-id":"I_kwDOEt7lWM6SzbjI","github-url":"https://github.com/buzden/deptycheck/issues/178","origin":"github"},"title":"Derivation fails when record update is used as a data index","message":"Consider the following example:\n\n```idris\nrecord X where\n  constructor MkX\n  field : Nat\n\ndata Y : X -\u003e Type where\n  Start : Y r\n  Next : Y ({field $= S} r) -\u003e Y r\n\ngenY : Fuel -\u003e (x : X) -\u003e Gen MaybeEmpty $ Y x\ngenY = deriveGen\n```\n\nI'd expect this derivation to succeed, but it fails with\n\n```\nWhile processing right hand side of genY.\nError during reflection:\nWhile processing right hand side of $resolved13352,\u003cDeriving.DepTyCheck.Gen.Y\u003e[0].\nWhile processing right hand side of $resolved13352,\u003cDeriving.DepTyCheck.Gen.Y\u003e[0],\u003c\u003cDeriving.DepTyCheck.Gen.Next\u003e\u003e.\nDeriving.DepTyCheck.Gen.case block in $resolved13323 is not accessible in this context.\n```\n\nI suspect coding of field update syntax through some case block does this, maybe we need to workaround it somehow on the library side.","files":null}]}