{"author":{"id":"3af9e2655ad9f293988512be60886dcee65d101213a8f77d6e1aec75c05cdd9f"},"ops":[{"type":1,"timestamp":1663920565,"nonce":"NHIw8gwV4LUU2rzPD+/RhUZquHs=","metadata":{"github-id":"I_kwDOEt7lWM5Sda2w","github-url":"https://github.com/buzden/deptycheck/issues/32","origin":"github"},"title":"Derived generator fails to compile with a \"Non linear pattern variable\" error","message":"# Steps to reproduce\n\nConsider the following module:\n\n```idris\nimport Test.DepTyCheck.Gen.Auto\n\n%default total\n\n%language ElabReflection\n\n%hint\nUsedConstructorDerivator : ConstructorDerivator\nUsedConstructorDerivator = LeastEffort\n\ndata Y : Unit -\u003e Unit -\u003e Type where\n MkY : Y x y\n\ndata X : Type where\n  MkX : Y x x -\u003e X\n\nfaultyGen : Fuel -\u003e Gen X\nfaultyGen = deriveGen\n```\n\n# Expected behaviour\n\nAll derives and typechecks OR a comprehensible error message giving a hint on what is wrong.\n\n# Observed behaviour\n\n```\nError: While processing right hand side of faultyGen. Error during reflection: While processing right hand side of $resolved11875,\u003cMain.X\u003e[]. While processing right hand side of $resolved11875,\u003cMain.X\u003e[],\u003c\u003cMain.MkX\u003e\u003e. Can't match on ?x [no locals in scope] (Non linear pattern variable).\n```","files":null}]}