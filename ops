{"author":{"id":"c8b5e6f4594a39a69d740ff06f6530160b48ff53db7027c22c4091f811b01812"},"ops":[{"type":1,"timestamp":1660054593,"nonce":"wK2pgL8OEVNJR7UF3PU65BNtbrw=","metadata":{"github-id":"I_kwDOEt7lWM5PePbk","github-url":"https://github.com/buzden/deptycheck/issues/8","origin":"github"},"title":"Small change to the data type leads to great increase of resources consumption","message":"Derivation for the following data type using `LeastEffort` derivation algorithm completes pretty fast:\n\n```idris\ndata X : Type where\n  MkX : (n, k : Nat) -\u003e Fin (n + k) -\u003e X\n\ncheckedGen : Fuel -\u003e Gen X\ncheckedGen = deriveGen @{MainCoreDerivator @{LeastEffort}}\n```\n\nIt takes ~5.3 Gb of memory and ~5.5 min of time.\n\n# Steps to reproduce\n\nNow, add some more (dependent) parameter to the constructor:\n\n```idris\ndata X : Type where\n  MkX : (n, k : Nat) -\u003e (f : Fin $ n + k) -\u003e So (finToNat f \u003c n + k) -\u003e X\n```\n\n# Expected behaviour\n\nDerives with similar resources consumption\n\n# Observed behaviour\n\nTakes ~28 Gb of memory and ~1/2 hour (on the same machine) to typecheck","files":null}]}